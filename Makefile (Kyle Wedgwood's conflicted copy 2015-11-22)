CXX = nvcc
RM = rm -f
CPPFLAGS  = -x cu -arch=compute_30 -code=sm_30
CPPFLAGS2 = -x c++ --std=c++11 -arch=compute_30 -code=sm_30
LDFLAGS = -arch=compute_30 -code=sm_30 -lcurand -larmadillo
INC  = -I. -dc
INC2 = -I. -c

OBJS = Driver.o \
       Fold.o \
       AbstractNonlinearProblem.o \
       AbstractNonlinearProblemJacobian.o \
       AbstractNonlinearSolver.o \
       NewtonSolver.o \
       ConvergenceCriterion.o \

all: $(OBJS)
		$(CXX) $(LDFLAGS) $(OBJS) -o Driver

%.o: %.cu
		$(CXX) $(CPPFLAGS) $(INC) $< -o $@

%.o: %.cpp
		$(CXX) $(CPPFLAGS2) $(INC2) $< -o $@

clean:
		rm -f *.o Driver
